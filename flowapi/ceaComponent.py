from flowapi.items import Component
'''
<ComponentMetadata>
    <ItemIdentifier>
      <Id>886af290</Id>
    </ItemIdentifier>
    <IsActive>true</IsActive>
    <Properties>
      <AbstractProperty xsi:type="ShortStringProperty">
        <propertyIdentifier>ItemPropertyInstanceIdentifier</propertyIdentifier>
        <title>Identifiant</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>CEA 886af290</value>
        <AllowEmpty>true</AllowEmpty>
      </AbstractProperty>
      <AbstractProperty xsi:type="TransformProperty">
        <propertyIdentifier>ItemPropertyTransformIdentifier</propertyIdentifier>
        <title>Position, rotation &amp; échelle</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <position>
            <x>1.33628356</x>
            <y>0.5317762</y>
            <z>0</z>
          </position>
          <rotation>
            <x>0</x>
            <y>0</y>
            <z>0</z>
            <w>1</w>
            <eulerAngles>
              <x>-0</x>
              <y>0</y>
              <z>0</z>
            </eulerAngles>
          </rotation>
          <scale>
            <x>1</x>
            <y>1</y>
            <z>1</z>
          </scale>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="ShortStringProperty">
        <propertyIdentifier>component_cea_text1_identifier</propertyIdentifier>
        <title>Bouton Texte 1</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>Bouton 1</value>
        <AllowEmpty>true</AllowEmpty>
      </AbstractProperty>
      <AbstractProperty xsi:type="ShortStringProperty">
        <propertyIdentifier>component_cea_text2_identifier</propertyIdentifier>
        <title>Bouton Texte 2</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>Bouton 2</value>
        <AllowEmpty>true</AllowEmpty>
      </AbstractProperty>
      <AbstractProperty xsi:type="ShortStringProperty">
        <propertyIdentifier>component_cea_text3_identifier</propertyIdentifier>
        <title>Bouton Texte 3</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>Bouton 3</value>
        <AllowEmpty>true</AllowEmpty>
      </AbstractProperty>
      <AbstractProperty xsi:type="ShortStringProperty">
        <propertyIdentifier>component_cea_sub1text1_identifier</propertyIdentifier>
        <title>Sub 1 Bouton Texte 1</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>SUB1Bouton 1</value>
        <AllowEmpty>true</AllowEmpty>
      </AbstractProperty>
      <AbstractProperty xsi:type="ShortStringProperty">
        <propertyIdentifier>component_cea_sub1text2_identifier</propertyIdentifier>
        <title>Sub 1 Bouton Texte 2</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>SUB1Bouton 2</value>
        <AllowEmpty>true</AllowEmpty>
      </AbstractProperty>
      <AbstractProperty xsi:type="ShortStringProperty">
        <propertyIdentifier>component_cea_sub1text3_identifier</propertyIdentifier>
        <title>Sub 1 Bouton Texte 3</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>SUB1Bouton 3</value>
        <AllowEmpty>true</AllowEmpty>
      </AbstractProperty>
      <AbstractProperty xsi:type="ShortStringProperty">
        <propertyIdentifier>component_cea_sub1text4_identifier</propertyIdentifier>
        <title>Sub 1 Bouton Texte 4</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>SUB1Bouton 4</value>
        <AllowEmpty>true</AllowEmpty>
      </AbstractProperty>
      <AbstractProperty xsi:type="ShortStringProperty">
        <propertyIdentifier>component_cea_sub1text5_identifier</propertyIdentifier>
        <title>Sub 1 Bouton Texte 5</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>SUB1Bouton 5</value>
        <AllowEmpty>true</AllowEmpty>
      </AbstractProperty>
      <AbstractProperty xsi:type="ShortStringProperty">
        <propertyIdentifier>component_cea_sub2text1_identifier</propertyIdentifier>
        <title>Sub 2 Bouton Texte 1</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>SUB2Bouton 1</value>
        <AllowEmpty>true</AllowEmpty>
      </AbstractProperty>
      <AbstractProperty xsi:type="ShortStringProperty">
        <propertyIdentifier>component_cea_sub2text2_identifier</propertyIdentifier>
        <title>Sub 2 Bouton Texte 2</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>SUB2Bouton 2</value>
        <AllowEmpty>true</AllowEmpty>
      </AbstractProperty>
      <AbstractProperty xsi:type="ShortStringProperty">
        <propertyIdentifier>component_cea_sub2text3_identifier</propertyIdentifier>
        <title>Sub 2 Bouton Texte 3</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>SUB2Bouton 3</value>
        <AllowEmpty>true</AllowEmpty>
      </AbstractProperty>
      <AbstractProperty xsi:type="ImageProperty">
        <propertyIdentifier>component_cea_image1_identifier</propertyIdentifier>
        <title>Bouton Icône 1</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>886af290_component_cea_image1_identifier_c9a0fc0c.png</value>
      </AbstractProperty>
      <AbstractProperty xsi:type="ImageProperty">
        <propertyIdentifier>component_cea_image2_identifier</propertyIdentifier>
        <title>Bouton Icône 2</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>886af290_component_cea_image2_identifier_067f6b05.png</value>
      </AbstractProperty>
      <AbstractProperty xsi:type="ImageProperty">
        <propertyIdentifier>component_cea_image3_identifier</propertyIdentifier>
        <title>Bouton Icône 3</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>886af290_component_cea_image3_identifier_8f691795.png</value>
      </AbstractProperty>
      <AbstractProperty xsi:type="ImageProperty">
        <propertyIdentifier>component_cea_image4_identifier</propertyIdentifier>
        <title>Bouton Icône 4</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>886af290_component_cea_image4_identifier_92ef6ba8.png</value>
      </AbstractProperty>
      <AbstractProperty xsi:type="ImageProperty">
        <propertyIdentifier>component_cea_image5_identifier</propertyIdentifier>
        <title>Bouton Icône 5</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>886af290_component_cea_image5_identifier_fc7e0531.png</value>
      </AbstractProperty>
      <AbstractProperty xsi:type="ImageProperty">
        <propertyIdentifier>component_cea_image6_identifier</propertyIdentifier>
        <title>Bouton Icône 6</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>886af290_component_cea_image6_identifier_b80a03d5.png</value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_0_0</propertyIdentifier>
        <title>Bouton 0 1</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_0_1</propertyIdentifier>
        <title>Bouton 0 2</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_0_2</propertyIdentifier>
        <title>Bouton 0 3</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_0_3</propertyIdentifier>
        <title>Bouton 0 4</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_0_4</propertyIdentifier>
        <title>Bouton 0 5</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_0_5</propertyIdentifier>
        <title>Bouton 0 6</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_0_6</propertyIdentifier>
        <title>Bouton 0 7</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_0_7</propertyIdentifier>
        <title>Bouton 0 8</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_0_8</propertyIdentifier>
        <title>Bouton 0 9</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_1_0</propertyIdentifier>
        <title>Bouton 1 1</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_1_1</propertyIdentifier>
        <title>Bouton 1 2</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_1_2</propertyIdentifier>
        <title>Bouton 1 3</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_1_3</propertyIdentifier>
        <title>Bouton 1 4</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_1_4</propertyIdentifier>
        <title>Bouton 1 5</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_2_0</propertyIdentifier>
        <title>Bouton 2 0</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_2_1</propertyIdentifier>
        <title>Bouton 2 1</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
      <AbstractProperty xsi:type="InteractiveProperty">
        <propertyIdentifier>CEAButton_2_2</propertyIdentifier>
        <title>Bouton 2 2</title>
        <ItemIdentifier>
          <Id>886af290</Id>
        </ItemIdentifier>
        <value>
          <displayInProperties>false</displayInProperties>
          <interactiveDirection>Trigger</interactiveDirection>
          <isActive>true</isActive>
        </value>
      </AbstractProperty>
    </Properties>
    <NovComponentIdentifier>
      <Id>Component_CEA</Id>
    </NovComponentIdentifier>
  </ComponentMetadata>'''

class Panneau(Component):
    name: str = "CEA Custom component"
    titre: str = "Title"
    description: str = "Description"
    image: str | None = None
    property_identifier: str = (
        "Component_panel_formation_button_next_interactive_identifier"
    )
    base_width_m: float = 1
    nov_component_identifier: str = "Component_panel_formation"

    def parse(self, component_dict):
        self.titre = component_dict["Properties"]["AbstractProperty"][2]["value"]
        self.description = component_dict["Properties"]["AbstractProperty"][3]["value"]
        self.image = component_dict["Properties"]["AbstractProperty"][4]["value"]

    def get_xml(self):
        item_dict = self.get_item_xml()
        item_dict["Properties"]["AbstractProperty"].extend(
            [
                {
                    "@xsi:type": "ShortStringProperty",
                    "AllowEmpty": "false",
                    "ItemIdentifier": {"Id": self.id},
                    "propertyIdentifier": "Component_panel_formation_title_identifier",
                    "title": "Titre",
                    "value": self.titre,
                },
                {
                    "@xsi:type": "LongStringProperty",
                    "AllowEmpty": "false",
                    "ItemIdentifier": {"Id": self.id},
                    "propertyIdentifier": "Component_panel_formation_description_identifier",
                    "title": "Description",
                    "value": self.description,
                },
                {
                    "@xsi:type": "ImageProperty",
                    "ItemIdentifier": {"Id": self.id},
                    "propertyIdentifier": "Component_panel_formation_image_identifier",
                    "title": "Image",
                    "value": self.image,
                },
                {
                    "@xsi:type": "InteractiveProperty",
                    "ItemIdentifier": {"Id": self.id},
                    "propertyIdentifier": "Component_panel_formation_button_next_interactive_identifier",
                    "title": "Bouton suivant",
                    "value": {
                        "displayInProperties": "true",
                        "interactiveDirection": "Next",
                        "isActive": "true",
                    },
                },
                {
                    "@xsi:type": "InteractiveProperty",
                    "ItemIdentifier": {"Id": self.id},
                    "propertyIdentifier": "Component_panel_formation_button_previous_interactive_identifier",
                    "title": "Bouton précédent",
                    "value": {
                        "displayInProperties": "true",
                        "interactiveDirection": "Previous",
                        "isActive": "true",
                    },
                },
            ]
        )
        item_dict["NovComponentIdentifier"] = {"Id": self.nov_component_identifier}
        return item_dict

    def set_size(self, diameter_m):
        self.set_scale(
            diameter_m / self.base_width_m,
            diameter_m / self.base_width_m,
            diameter_m / self.base_width_m,
        )
        return self